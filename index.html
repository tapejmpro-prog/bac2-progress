<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Progression BAC 2</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
      background: #0a0a0a;
      color: white;
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    h1 {
      text-align: center;
      font-size: 1.4rem;
      font-weight: 600;
      margin-bottom: 8px;
      letter-spacing: -0.02em;
      color: #f5f5f7;
    }
    
    .average-box {
      text-align: center;
      margin-bottom: 24px;
    }
    
    .average-badge {
      display: inline-block;
      background: rgba(255, 255, 255, 0.05);
      padding: 10px 24px;
      border-radius: 50px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
    }
    
    .average-label {
      color: #86868b;
      font-size: 0.85rem;
    }
    
    .average-value {
      font-size: 1.5rem;
      font-weight: 600;
      margin-left: 10px;
      color: #d4a847;
    }
    
    .chart-container {
      background: #0a0a0a;
      border-radius: 20px;
      padding: 20px;
      margin-bottom: 24px;
      border: 1px solid rgba(255, 255, 255, 0.08);
    }
    
    .sliders-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 10px;
    }
    
    .slider-card {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 14px;
      padding: 16px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      transition: background 0.2s ease;
    }
    
    .slider-card:hover {
      background: rgba(255, 255, 255, 0.05);
    }
    
    .slider-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    
    .slider-label {
      font-size: 0.9rem;
      font-weight: 500;
      color: #f5f5f7;
    }
    
    .slider-value {
      font-weight: 600;
      font-size: 0.9rem;
      color: #d4a847;
    }
    
    input[type="range"] {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      appearance: none;
      -webkit-appearance: none;
      cursor: pointer;
      background: #1d1d1f;
    }
    
    input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #d4a847;
      cursor: pointer;
      box-shadow: 0 0 12px rgba(212, 168, 71, 0.4);
      border: 2px solid #f0d078;
    }
    
    input[type="range"]::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #d4a847;
      cursor: pointer;
      border: 2px solid #f0d078;
    }
    
    .footer {
      text-align: center;
      color: #48484a;
      font-size: 0.7rem;
      margin-top: 24px;
      letter-spacing: 0.02em;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìä Progression BAC 2</h1>
    
    <div class="average-box">
      <div class="average-badge">
        <span class="average-label">Moyenne g√©n√©rale</span>
        <span class="average-value" id="averageValue">0%</span>
      </div>
    </div>
    
    <div class="chart-container">
      <canvas id="radarChart"></canvas>
    </div>
    
    <div class="sliders-grid" id="slidersContainer"></div>
    
    <p class="footer">Q2 2025-2026 ‚Ä¢ Donn√©es sauvegard√©es localement</p>
  </div>

  <script>
    // Configuration des mati√®res
    const subjects = [
      { id: 'neerlandais', label: 'üáßüá™ N√©erlandais', shortLabel: 'N√©erlandais' },
      { id: 'droitAdmin', label: '‚öñÔ∏è Droit Admin', shortLabel: 'Droit Admin' },
      { id: 'droitSocietes', label: 'üè¢ Droit Soci√©t√©s', shortLabel: 'Droit Soci√©t√©s' },
      { id: 'droitFiscal', label: 'üí∞ Droit Fiscal', shortLabel: 'Droit Fiscal' },
      { id: 'gestionFin', label: 'üìä Gestion Fin.', shortLabel: 'Gestion Fin.' },
      { id: 'resolution', label: 'ü§ù R√©solution', shortLabel: 'R√©solution' },
      { id: 'english', label: 'üá¨üáß English', shortLabel: 'English' }
    ];

    // Couleurs dor√©es
    const goldColor = 'rgba(212, 168, 71, 0.35)';
    const goldBorder = '#d4a847';
    const goldLight = '#f0d078';

    // Charger les scores depuis localStorage ou initialiser √† 0
    let scores = JSON.parse(localStorage.getItem('bac2-scores')) || {};
    subjects.forEach(s => {
      if (scores[s.id] === undefined) scores[s.id] = 0;
    });

    // Cr√©er le graphique radar
    const ctx = document.getElementById('radarChart').getContext('2d');
    const radarChart = new Chart(ctx, {
      type: 'radar',
      data: {
        labels: subjects.map(s => s.shortLabel),
        datasets: [{
          label: 'Progression',
          data: subjects.map(s => scores[s.id]),
          backgroundColor: goldColor,
          borderColor: goldBorder,
          borderWidth: 2,
          pointBackgroundColor: goldLight,
          pointBorderColor: goldLight,
          pointBorderWidth: 0,
          pointRadius: 5,
          pointHoverRadius: 7,
          fill: true
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: true,
        scales: {
          r: {
            beginAtZero: true,
            max: 100,
            ticks: {
              stepSize: 20,
              color: '#3a3a3c',
              backdropColor: 'transparent',
              font: {
                size: 10
              }
            },
            grid: {
              color: '#2c2c2e',
              lineWidth: 1
            },
            angleLines: {
              color: '#2c2c2e',
              lineWidth: 1
            },
            pointLabels: {
              color: '#86868b',
              font: {
                size: 11,
                weight: '500'
              }
            }
          }
        },
        plugins: {
          legend: {
            display: false
          }
        },
        elements: {
          line: {
            tension: 0
          }
        }
      }
    });

    // Cr√©er les sliders
    const slidersContainer = document.getElementById('slidersContainer');
    subjects.forEach(subject => {
      const card = document.createElement('div');
      card.className = 'slider-card';
      card.innerHTML = `
        <div class="slider-header">
          <span class="slider-label">${subject.label}</span>
          <span class="slider-value" id="value-${subject.id}">${scores[subject.id]}%</span>
        </div>
        <input type="range" min="0" max="100" value="${scores[subject.id]}" id="slider-${subject.id}"
          style="background: linear-gradient(to right, #d4a847 0%, #d4a847 ${scores[subject.id]}%, #1d1d1f ${scores[subject.id]}%, #1d1d1f 100%);">
      `;
      slidersContainer.appendChild(card);

      // Event listener
      const slider = card.querySelector('input');
      slider.addEventListener('input', (e) => {
        const value = parseInt(e.target.value);
        scores[subject.id] = value;
        
        // Update display
        document.getElementById(`value-${subject.id}`).textContent = value + '%';
        slider.style.background = `linear-gradient(to right, #d4a847 0%, #d4a847 ${value}%, #1d1d1f ${value}%, #1d1d1f 100%)`;
        
        // Update chart
        updateChart();
        
        // Save
        localStorage.setItem('bac2-scores', JSON.stringify(scores));
      });
    });

    // Fonction de mise √† jour
    function updateChart() {
      radarChart.data.datasets[0].data = subjects.map(s => scores[s.id]);
      radarChart.update('none');
      updateAverage();
    }

    function updateAverage() {
      const values = subjects.map(s => scores[s.id]);
      const avg = Math.round(values.reduce((a, b) => a + b, 0) / values.length);
      const avgElement = document.getElementById('averageValue');
      avgElement.textContent = avg + '%';
    }

    // Initial update
    updateAverage();
  </script>
</body>
</html>
